<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      <img src="assets/img/logo.png" alt="COPOS Notes Logo" style="height: 3rem; vertical-align: middle;">
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <img src="assets/img/logo.png" alt="COPOS Notes Logo" style="height: 3rem; vertical-align: middle;">
    </ion-toolbar>
  </ion-header>

  <div id="container">
    <div class="task-board">
      <div class="task-column">
        <h3>New</h3>
        <div *ngIf="newTasks.length === 0" class="ion-text-center ion-padding">
          <ion-icon name="checkbox-outline" size="large" color="medium"></ion-icon>
          <p>No new tasks.</p>
        </div>
        <ion-list *ngIf="newTasks.length > 0">
          <ion-item-sliding *ngFor="let task of newTasks">
            <ion-item class="task-item">
              <ion-checkbox slot="start" [(ngModel)]="task.status" (ionChange)="updateTaskStatus(task)" [checked]="task.status === 'completed'"></ion-checkbox>
              <ion-label>
                <h2>{{ task.title }}</h2>
                <p>{{ task.description }}</p>
                <p *ngIf="task.due_date">Due: {{ task.due_date | date:'shortDate' }}</p>
                <p *ngIf="task.reminder_time">Reminder: {{ task.reminder_time | date:'shortTime' }}</p>
              </ion-label>
            </ion-item>
            <ion-item-options side="end">
              <ion-item-option color="primary" (click)="editTask(task)">Edit</ion-item-option>
              <ion-item-option color="danger" (click)="deleteTask(task.id)">Delete</ion-item-option>
            </ion-item-options>
          </ion-item-sliding>
        </ion-list>
      </div>

      <div class="task-column">
        <h3>In Progress</h3>
        <div *ngIf="inProgressTasks.length === 0" class="ion-text-center ion-padding">
          <ion-icon name="hourglass-outline" size="large" color="medium"></ion-icon>
          <p>No tasks in progress.</p>
        </div>
        <ion-list *ngIf="inProgressTasks.length > 0">
          <ion-item-sliding *ngFor="let task of inProgressTasks">
            <ion-item class="task-item">
              <ion-checkbox slot="start" [(ngModel)]="task.status" (ionChange)="updateTaskStatus(task)" [checked]="task.status === 'completed'"></ion-checkbox>
              <ion-label>
                <h2>{{ task.title }}</h2>
                <p>{{ task.description }}</p>
                <p *ngIf="task.due_date">Due: {{ task.due_date | date:'shortDate' }}</p>
                <p *ngIf="task.reminder_time">Reminder: {{ task.reminder_time | date:'shortTime' }}</p>
              </ion-label>
            </ion-item>
            <ion-item-options side="end">
              <ion-item-option color="primary" (click)="editTask(task)">Edit</ion-item-option>
              <ion-item-option color="danger" (click)="deleteTask(task.id)">Delete</ion-item-option>
            </ion-item-options>
          </ion-item-sliding>
        </ion-list>
      </div>

      <div class="task-column">
        <h3>Completed</h3>
        <div *ngIf="completedTasks.length === 0" class="ion-text-center ion-padding">
          <ion-icon name="checkmark-done-outline" size="large" color="medium"></ion-icon>
          <p>No completed tasks.</p>
        </div>
        <ion-list *ngIf="completedTasks.length > 0">
          <ion-item-sliding *ngFor="let task of completedTasks">
            <ion-item class="task-item">
              <ion-checkbox slot="start" [(ngModel)]="task.status" (ionChange)="updateTaskStatus(task)" [checked]="task.status === 'completed'"></ion-checkbox>
              <ion-label>
                <h2>{{ task.title }}</h2>
                <p>{{ task.description }}</p>
                <p *ngIf="task.due_date">Due: {{ task.due_date | date:'shortDate' }}</p>
                <p *ngIf="task.reminder_time">Reminder: {{ task.reminder_time | date:'shortTime' }}</p>
              </ion-label>
            </ion-item>
            <ion-item-options side="end">
              <ion-item-option color="primary" (click)="editTask(task)">Edit</ion-item-option>
              <ion-item-option color="danger" (click)="deleteTask(task.id)">Delete</ion-item-option>
            </ion-item-options>
          </ion-item-sliding>
        </ion-list>
      </div>
    </div>

  </div>
  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="openAddTaskModal()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>